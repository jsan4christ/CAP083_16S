"0","#ps2.v1v2v3 <- subset_taxa(ps2.v1v2v3, !(Species %in% NA | Species == """"))"
"0","ps2.v1v2v3 <- prune_taxa(taxa_sums(ps2.v1v2v3) > 0, ps2.v1v2v3)"
"0","#ps.ids9 <- transform_sample_counts(ps.ids9, function(x){x/sum(x)})"
"0","ps2.v1v2v3.merged <- merge_less_than_top(ps2.v1v2v3, 8)"
"0","#ps2.v1v2v3.glom <- tax_glom(ps2.v1v2v3.merged, taxrank = ""Species"")"
"0","df.ps2.v1v2v3.glom <- psmelt(ps2.v1v2v3.merged)"
"0","colourCount = length(unique(df.ps2.v1v2v3.glom$Sample))"
"0","df.ps2.v1v2v3.glom_ <- df.ps2.v1v2v3.glom[order(-df.ps2.v1v2v3.glom[,""Abundance""]),]"
"0","p <-  ggplot(df.ps2.v1v2v3.glom_,aes_string(x= ""VisitCode"", y=""Abundance"", fill = ""Species"")) +  "
"0","            geom_bar(stat='identity') + "
"0","            scale_fill_manual(values=customPalette) +"
"0","            #scale_fill_manual(values=getPalette(colourCount)) + "
"0","            theme_minimal() + "
"0","            theme(axis.text.x = element_text(angle = 45, hjust = 0),"
"0","              panel.grid.major.x = element_blank() ,"
"0","              panel.grid.major.y = element_line( size=.1, color=""black"" ))"
"0","p"
