"0","library(alluvial)"
"0","sample_data(ps2.v1.cst.glom.species.ra) <- sample_data(ps2.v1.cst.glom.species.ra)[order(sample_data(ps2.v1.cst.glom.species.ra)$SampleID, sample_data(ps2.v1.cst.glom.species.ra)$VisitCode),]"
"0","sample_data(ps2.v2.cst.glom.species.ra) <- sample_data(ps2.v2.cst.glom.species.ra)[order(sample_data(ps2.v2.cst.glom.species.ra)$SampleID, sample_data(ps2.v2.cst.glom.species.ra)$VisitCode),]"
"0","sample_data(ps2.v3.cst.glom.species.ra) <- sample_data(ps2.v3.cst.glom.species.ra)[order(sample_data(ps2.v3.cst.glom.species.ra)$SampleID, sample_data(ps2.v3.cst.glom.species.ra)$VisitCode),]"
"0","alluvialData <- data.frame(Visit1 = sample_data(ps2.v1.cst.glom.species.ra)$sim_CST, "
"0","Visit2  = sample_data(ps2.v2.cst.glom.species.ra)$sim_CST, "
"0","Visit3  = sample_data(ps2.v3.cst.glom.species.ra)$sim_CST)"
"0","alluvialData <- alluvialData %>% dplyr::group_by(Visit1, Visit2, Visit3) %>% dplyr::summarise(n = n()) "
"0","alluvialDataT <- as.data.frame(alluvialData)"
"0","alluvial("
"0","    alluvialDataT[, 1:3 ],"
"0","    freq=alluvialDataT$n,"
"0","    col = ifelse( alluvialDataT$Visit1 == ""I"", CSTsPallete[1], "
"0","                  ifelse( alluvialDataT$Visit1 == ""II"", CSTsPallete[2], "
"0","                          ifelse( alluvialDataT$Visit1 == ""III"", CSTsPallete[3], "
"0","                                  ifelse( alluvialDataT$Visit1 == ""IV-A"", CSTsPallete[4],"
"0","                                          ifelse(alluvialDataT$Visit1 == ""IV-B"", CSTsPallete[5],"
"0","                                                 ifelse(alluvialDataT$Visit1 == ""IV-C"", CSTsPallete[6], "
"0","                                                        ifelse(alluvialDataT$Visit1 == ""V"", CSTsPallete[7], """"))))))),"
"0","    border = c(""white""),"
"0","    alpha = 0.8,"
"0","    blocks=FALSE,"
"0","    axis_labels = c(""Baseline"", ""6 weeks"", ""12 weeks"")"
"0","  )"
