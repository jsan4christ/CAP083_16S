"0","ids9 <- readRDS(""results/recurredIds.RDS"")"
"0","ps.ids9 <- prune_samples(sample_data(ps2.v1v2v3)$ParticipantID %in% ids9, ps2.v1v2v3)"
"0","ps.ids9 <- subset_taxa(ps.ids9, !(Species %in% NA | Species == """"))"
"0","ps.ids9 <- prune_samples(sample_sums(ps.ids9) > 0, ps.ids9)"
"0","ps.ids9 <- prune_taxa(taxa_sums(ps.ids9) > 0, ps.ids9)"
"0","#ps.ids9 <- transform_sample_counts(ps.ids9, function(x){x/sum(x)})"
"0","ps.ids9.merged <- merge_less_than_top(ps.ids9, 13)"
"0","ps.ids9.glom <- tax_glom(ps.ids9.merged, taxrank = ""Species"")"
"0","df9 <- psmelt(ps.ids9.glom)"
"0","df9$ParticipantID <- as.character(df9$ParticipantID)"
"0","p <-  ggplot(df9[order(-df9[,""Abundance""]),],aes_string(x= ""VisitCode"", y=""Abundance"", fill = ""Species"")) +  "
"0","            geom_bar(stat='identity') + "
"0","            scale_fill_manual(values=customPalette) +"
"0","            theme_minimal() + "
"0","            theme(axis.text.x = element_text(angle = 45, hjust = 0),"
"0","              panel.grid.major.x = element_blank() ,"
"0","              panel.grid.major.y = element_line( size=.1, color=""black"" ))"
"0","p"
